{
    "componentId": "keboola.ex-facebook-ads",
    "payload": {
        "name": "Facebook Ads",
        "configuration": {
            "parameters": {
                "accounts": {},
                "api-version": "v10.0",
                "queries": [
                    {
                        "id": 25200,
                        "type": "nested-query",
                        "name": "facebook_ads_insights_last_90d",
                        "query": {
                            "path": "",
                            "fields": "insights.level(ad).action_breakdowns(action_type).date_preset(last_90d).time_increment(1){ad_id,ad_name,impressions,reach,clicks,spend}",
                            "ids": "",
                            "limit": "5"
                        }
                    },
                    {
                        "id": 67799,
                        "type": "nested-query",
                        "name": "facebook_ads_insights_monthly",
                        "query": {
                            "path": "",
                            "fields": "insights.level(ad).action_breakdowns(action_type).date_preset(maximum).time_increment(monthly){ad_id,ad_name,impressions,reach,clicks,spend}",
                            "ids": "",
                            "limit": "25"
                        }
                    }
                ]
            },
            "processors": {
                "after": [
                    {
                        "definition": {
                            "component": "keboola.processor-create-manifest"
                        },
                        "parameters": {
                            "delimiter": ",",
                            "enclosure": "\"",
                            "incremental": false,
                            "primary_key": [],
                            "columns_from": "header"
                        }
                    },
                    {
                        "definition": {
                            "component": "keboola.processor-add-metadata"
                        },
                        "parameters": {
                            "tables": [
                                {
                                    "table": "facebook_ads_insights_last_90d_insights",
                                    "metadata": [
                                        {
                                            "key": "bdm.scaffold.table.tag",
                                            "value": "ShoptetEcommerce.internal.inKeboolaExFacebookAdsFacebookAdsInsightsLast90dInsights"
                                        },
                                        {
                                            "key": "scaffold.id",
                                            "value": "ShoptetEcommerce"
                                        }
                                    ]
                                },
                                {
                                    "table": "facebook_ads_insights_monthly_insights",
                                    "metadata": [
                                        {
                                            "key": "bdm.scaffold.table.tag",
                                            "value": "ShoptetEcommerce.internal.inKeboolaExFacebookAdsFacebookAdsInsightsMonthlyInsights"
                                        },
                                        {
                                            "key": "scaffold.id",
                                            "value": "ShoptetEcommerce"
                                        }
                                    ]
                                }
                            ]
                        }
                    }
                ]
            }
        }
    }
}
